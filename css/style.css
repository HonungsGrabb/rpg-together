* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --bg-dark: #0d1117;
    --bg-medium: #161b22;
    --bg-light: #21262d;
    --text-primary: #e6edf3;
    --text-secondary: #8b949e;
    --accent-gold: #f0b832;
    --accent-red: #f85149;
    --accent-green: #3fb950;
    --accent-blue: #58a6ff;
    --accent-purple: #a371f7;
    --hp-color: #da3633;
    --mana-color: #388bfd;
    --xp-color: #a371f7;
}

body {
    font-family: 'Segoe UI', system-ui, sans-serif;
    background: var(--bg-dark);
    color: var(--text-primary);
    min-height: 100vh;
}

.hidden { display: none !important; }

/* ===================== */
/* BUTTONS */
/* ===================== */
button {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.2s;
}

.btn-primary {
    background: var(--accent-green);
    color: #000;
}
.btn-primary:hover { background: #2ea043; }

.btn-secondary {
    background: var(--bg-light);
    color: var(--text-primary);
    border: 1px solid var(--text-secondary);
}
.btn-secondary:hover { background: var(--bg-medium); }

.btn-danger {
    background: var(--accent-red);
    color: #fff;
}
.btn-danger:hover { background: #da3633; }

/* ===================== */
/* AUTH SCREEN */
/* ===================== */
.screen {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

.auth-container {
    background: var(--bg-medium);
    padding: 40px;
    border-radius: 12px;
    text-align: center;
    width: 90%;
    max-width: 400px;
}

.auth-container h1 {
    font-size: 28px;
    margin-bottom: 8px;
}

.subtitle {
    color: var(--text-secondary);
    margin-bottom: 24px;
}

.auth-form {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.auth-form input {
    padding: 12px;
    border: 1px solid var(--bg-light);
    border-radius: 6px;
    background: var(--bg-dark);
    color: var(--text-primary);
    font-size: 14px;
}

.auth-form a {
    color: var(--accent-blue);
    text-decoration: none;
}

#auth-message {
    padding: 10px;
    margin-bottom: 16px;
    border-radius: 6px;
    display: none;
}
#auth-message:not(:empty) { display: block; }
#auth-message.error { background: rgba(248,81,73,0.2); color: var(--accent-red); }
#auth-message.success { background: rgba(63,185,80,0.2); color: var(--accent-green); }

/* ===================== */
/* SAVE SCREEN */
/* ===================== */
.save-container {
    text-align: center;
    width: 90%;
    max-width: 600px;
}

.save-container h1 { margin-bottom: 24px; }

#save-slots {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 24px;
}

.save-slot {
    background: var(--bg-medium);
    padding: 20px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: transform 0.2s, background 0.2s;
}
.save-slot:hover { background: var(--bg-light); transform: translateX(4px); }
.save-slot.empty { justify-content: center; color: var(--text-secondary); }

.save-info h3 { margin-bottom: 4px; text-align: left; }
.save-info p { color: var(--text-secondary); font-size: 13px; text-align: left; }

.delete-btn {
    background: var(--accent-red);
    color: #fff;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    padding: 0;
    font-size: 16px;
}

/* ===================== */
/* SELECTION SCREENS */
/* ===================== */
.selection-container, .name-container {
    text-align: center;
    width: 90%;
    max-width: 800px;
}

.selection-container h2, .name-container h2 { margin-bottom: 24px; }

.selection-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 24px;
}

.selection-card {
    background: var(--bg-medium);
    padding: 20px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    border: 2px solid transparent;
}
.selection-card:hover { border-color: var(--accent-gold); transform: translateY(-4px); }

.selection-card .emoji { font-size: 40px; margin-bottom: 8px; }
.selection-card h3 { margin-bottom: 8px; }
.selection-card p { color: var(--text-secondary); font-size: 13px; margin-bottom: 8px; }
.selection-card .bonuses { color: var(--accent-green); font-size: 12px; }

.name-container input {
    padding: 14px;
    font-size: 18px;
    border: 2px solid var(--bg-light);
    border-radius: 8px;
    background: var(--bg-dark);
    color: var(--text-primary);
    width: 100%;
    max-width: 300px;
    text-align: center;
    margin-bottom: 16px;
}

#name-preview { color: var(--accent-gold); font-size: 18px; margin-bottom: 16px; }

.name-buttons { display: flex; gap: 12px; justify-content: center; }

/* ===================== */
/* GAME SCREEN */
/* ===================== */
#game-screen {
    flex-direction: column;
    align-items: stretch;
    padding: 0;
}

.game-header {
    background: var(--bg-medium);
    padding: 12px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--bg-light);
}

.header-left { display: flex; gap: 12px; align-items: center; }
#player-name-display { font-weight: 700; font-size: 18px; }
#player-class-badge { color: var(--text-secondary); font-size: 14px; }

#floor-display { color: var(--accent-gold); font-weight: 600; }

.header-right { display: flex; gap: 16px; align-items: center; }
#gold-display { color: var(--accent-gold); }
#menu-btn { background: var(--bg-light); padding: 8px 12px; }

.game-main {
    display: grid;
    grid-template-columns: 220px 1fr 220px;
    flex: 1;
    gap: 16px;
    padding: 16px;
    overflow: hidden;
}

/* Stats Panel */
.stats-panel {
    background: var(--bg-medium);
    padding: 16px;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.stat-bar {
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.stat-bar label { font-size: 12px; color: var(--text-secondary); }
.stat-bar .bar {
    height: 16px;
    background: var(--bg-dark);
    border-radius: 8px;
    overflow: hidden;
}
.stat-bar .fill {
    height: 100%;
    transition: width 0.3s;
}
.stat-bar span { font-size: 11px; text-align: right; }

.hp-fill { background: linear-gradient(90deg, #da3633, #f85149); }
.mana-fill { background: linear-gradient(90deg, #1f6feb, #58a6ff); }
.xp-fill { background: linear-gradient(90deg, #8957e5, #a371f7); }

.stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
}
.stat {
    background: var(--bg-dark);
    padding: 8px;
    border-radius: 4px;
    font-size: 13px;
    text-align: center;
}

.action-buttons {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: auto;
}
.action-btn {
    background: var(--bg-light);
    color: var(--text-primary);
    padding: 10px;
    text-align: left;
}
.action-btn:hover { background: var(--bg-dark); }

/* Map Section */
.map-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: var(--bg-medium);
    border-radius: 8px;
    padding: 16px;
}

.map-grid {
    font-family: 'Courier New', monospace;
    font-size: 18px;
    line-height: 1.2;
    background: var(--bg-dark);
    padding: 12px;
    border-radius: 8px;
    border: 2px solid var(--bg-light);
}

.grid-row { display: flex; }

.tile {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
}

/* Dungeon tiles */
.tile-floor { color: #444; }
.tile-wall { color: #666; background: #222; }
.tile-stairs { color: var(--accent-gold); }
.tile-enemy { color: var(--accent-red); }
.tile-chest { color: var(--accent-gold); }
.tile-exit { color: var(--accent-green); }
.tile-hidden { color: #111; background: #0a0a0a; }
.tile-player { color: var(--accent-blue); font-weight: bold; }

/* World tiles */
.tile-ground { color: #3d5c3d; }
.tile-tree { color: #2d6a2d; }
.tile-water { color: #4a8be0; }
.tile-dungeon { color: var(--accent-purple); }

.controls-hint {
    margin-top: 12px;
    color: var(--text-secondary);
    font-size: 12px;
}

/* Log Panel */
.log-panel {
    background: var(--bg-medium);
    padding: 16px;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
}
.log-panel h3 { margin-bottom: 12px; font-size: 14px; }

#game-log {
    flex: 1;
    overflow-y: auto;
    font-size: 12px;
    max-height: 400px;
}
#game-log p { margin-bottom: 4px; padding: 4px; border-radius: 4px; }
#game-log .combat { color: var(--accent-red); }
#game-log .reward { color: var(--accent-gold); }
#game-log .heal { color: var(--accent-green); }
#game-log .levelup { color: var(--accent-purple); background: rgba(163,113,247,0.1); }
#game-log .info { color: var(--text-secondary); }
#game-log .death { color: var(--accent-red); background: rgba(248,81,73,0.1); }

/* ===================== */
/* MODALS */
/* ===================== */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
}

.modal-content {
    background: var(--bg-medium);
    padding: 24px;
    border-radius: 12px;
    max-width: 90%;
    max-height: 90%;
    overflow-y: auto;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.close-btn {
    background: var(--bg-light);
    width: 32px;
    height: 32px;
    border-radius: 50%;
    padding: 0;
}

/* Equipment Modal */
.equipment-content { width: 400px; }

.equipment-grid {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.equip-slot-modal {
    display: grid;
    grid-template-columns: 40px 80px 1fr;
    align-items: center;
    gap: 12px;
    background: var(--bg-dark);
    padding: 12px;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s;
}
.equip-slot-modal:hover { background: var(--bg-light); }
.equip-slot-modal.empty { opacity: 0.5; cursor: default; }
.equip-slot-modal.empty:hover { background: var(--bg-dark); }

.slot-emoji { font-size: 24px; }
.slot-name { color: var(--text-secondary); font-size: 12px; }
.item-info { font-size: 14px; }

/* Skills Modal */
.skills-content { width: 450px; }

.skills-grid {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.skill-card {
    display: flex;
    gap: 12px;
    align-items: center;
    background: var(--bg-dark);
    padding: 12px;
    border-radius: 6px;
}
.skill-emoji { font-size: 32px; }
.skill-info h4 { margin-bottom: 4px; }
.skill-info p { color: var(--text-secondary); font-size: 12px; margin-bottom: 4px; }
.skill-cost { color: var(--accent-blue); font-size: 11px; }

.no-skills { color: var(--text-secondary); text-align: center; padding: 40px; }

/* Inventory Modal */
.inventory-content { width: 380px; }

.inventory-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
}

.inv-slot {
    aspect-ratio: 1;
    background: var(--bg-dark);
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    cursor: pointer;
    transition: all 0.2s;
    border: 2px solid transparent;
}
.inv-slot:hover:not(.empty) { border-color: var(--accent-gold); }
.inv-slot.empty { opacity: 0.3; cursor: default; }

/* Item Detail Modal */
.item-detail-content { width: 320px; }

.item-detail-header {
    display: flex;
    gap: 16px;
    align-items: center;
    margin-bottom: 16px;
}
.item-emoji { font-size: 48px; }
.item-type { color: var(--text-secondary); font-size: 12px; text-transform: uppercase; }

#item-detail-desc {
    color: var(--text-secondary);
    margin-bottom: 16px;
    font-size: 14px;
}

.item-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 20px;
}
.stat-bonus {
    background: var(--bg-dark);
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 12px;
    color: var(--accent-green);
}

.item-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}
.item-actions button { flex: 1; min-width: 80px; }

/* Combat Modal */
.combat-content {
    width: 500px;
    text-align: center;
}
.combat-content h2 { margin-bottom: 20px; }

.combat-arena {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.combatant {
    flex: 1;
    padding: 16px;
    background: var(--bg-dark);
    border-radius: 8px;
}
.combatant h3 { margin-bottom: 8px; }

.combat-bar {
    height: 12px;
    background: #333;
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 4px;
}
.mana-combat-bar { margin-top: 8px; }
.enemy-fill { background: linear-gradient(90deg, #da3633, #f85149); }
.enemy-emoji { font-size: 40px; display: block; margin-bottom: 8px; }

.vs {
    padding: 0 20px;
    font-size: 24px;
    font-weight: bold;
    color: var(--accent-gold);
}

.combat-log {
    background: var(--bg-dark);
    padding: 12px;
    border-radius: 6px;
    height: 100px;
    overflow-y: auto;
    margin-bottom: 16px;
    text-align: left;
    font-size: 12px;
}
.combat-log p { margin-bottom: 4px; }
.combat-log .combat { color: var(--accent-red); }
.combat-log .heal { color: var(--accent-green); }
.combat-log .info { color: var(--text-secondary); }

.combat-spells {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 16px;
    justify-content: center;
}
.spell-btn {
    background: var(--accent-purple);
    color: #fff;
    padding: 8px 12px;
    font-size: 12px;
}
.spell-btn:disabled { opacity: 0.4; cursor: not-allowed; }
.spell-btn small { opacity: 0.7; }

.combat-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
}

/* Death Modal */
.death-content {
    width: 320px;
    text-align: center;
}
.death-content h2 { color: var(--accent-red); margin-bottom: 20px; }
#death-stats { margin-bottom: 24px; color: var(--text-secondary); }
#death-stats p { margin-bottom: 8px; }

/* Prompt Modals */
.prompt-content {
    width: 320px;
    text-align: center;
}
.prompt-content h2 { margin-bottom: 12px; }
.prompt-content p { color: var(--text-secondary); margin-bottom: 20px; }
.prompt-buttons { display: flex; gap: 12px; justify-content: center; }

/* Pause Modal */
.pause-content {
    width: 280px;
    text-align: center;
}
.pause-content h2 { margin-bottom: 20px; }
.pause-content button { width: 100%; margin-bottom: 12px; }

/* ===================== */
/* RESPONSIVE */
/* ===================== */
@media (max-width: 900px) {
    .game-main {
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr auto;
    }
    
    .stats-panel {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-between;
    }
    
    .stat-bar { flex: 1; min-width: 100px; }
    .stats-grid { flex: 1; min-width: 150px; }
    .action-buttons { flex-direction: row; flex: 1; min-width: 100%; margin-top: 12px; }
    
    .log-panel { order: 3; }
    #game-log { max-height: 150px; }
    
    .tile { width: 20px; height: 20px; font-size: 14px; }
}
